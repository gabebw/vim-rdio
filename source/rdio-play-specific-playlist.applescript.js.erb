// vim: filetype=javascript

<%= File.read("./js/findRdioTab.js") %>
<%= File.read("./js/rdioTab.js") %>

// The "run" function is automatically run when the file is run, like "main" in
// some other languages.
function run(argv){
  var rdioTab = VimRdio.findRdioTab();
  var playlistName = argv[0];
  var defineFunctions = <%= minify_javascript("all.js") %>;
  rdioTab.executeJavascript(defineFunctions);
  rdioTab.executeJavascript(
    'VimRdio.selectAndPlayPlaylist("' + playlistName + '")'
  );
}
